{"version":3,"sources":["webpack://tumblr/webpack/universalModuleDefinition","webpack://tumblr/webpack/bootstrap","webpack://tumblr/./src/templates/template-audio.js","webpack://tumblr/./src/templates/template-chat.js","webpack://tumblr/./src/templates/template-link.js","webpack://tumblr/./src/templates/template-photo.js","webpack://tumblr/./src/templates/template-quote.js","webpack://tumblr/./src/templates/template-text.js","webpack://tumblr/./src/templates/template-video.js","webpack://tumblr/./src/tumblr.js"],"names":["TemplateAudio","datas","player","summary","TemplateChat","title","dialogue","map","line","label","phrase","join","TemplateLink","url","description","TemplatePhoto","photos","original_size","caption","TemplateQuote","text","source","TemplateText","body","TemplateVideo","embed_code","Tumblr","constructor","options","useAPI","getAllDatas","jsonComplete","console","log","addEvents","buildDOM","e","cache","getDataFromCache","window","cacheMethod","getItem","getDataFromAPI","setItem","JSON","stringify","parse","removeItem","datasFirstRequest","requestAPI","getAPIUrl","totalPosts","response","total_posts","nbLoop","getNumberOfRequest","posts","length","apiUrls","i","push","nbPostPerRequest","requests","forEach","fetch","then","json","Promise","all","responses","concat","userOptions","defaultOptions","host","keyAPI","limitData","element","nearBottom","elementPerPage","totalPages","Object","assign","infiniteScroll","endPage","isLoading","currentPage","handlers","onScroll","bind","addEventListener","html","maxIteration","post","type","template","getTemplateByType","insertAdjacentHTML","checkPage","getScrollTop","document","clientHeight","innerHeight","getPostOfPage","onReceivedNewPosts","LikeButton","get_status_by_page","on","eventName","method","self","call","off","trigger","totalPost","Math","ceil","numPage","taggedPage","getTagPage","getRelatedPosts","listPosts","listID","randomTagsArray","randomArray","currentID","tags","params","limit","ignoreTag","getTagsPost","getIdPostPage","l","lengthTagIgnore","splice","lengthPosts","data","j","lengthTag","k","lengthCurrentTag","toLowerCase","id","includes","getRandoms","parseInt","lengthRandom","getAllTags","listTag","lengthPost","lengthtag","sort","idPost","listTags","urlToCheck","location","hash","pathname","pathName","split","tagComponent","decodeURIComponent","replace","currentPostUrl","href","currentIdPost","match","$1","indexOf","pageYOffset","documentElement","scrollTop","numPicks","min","max","len","nums","Array","selections","index","floor","random"],"mappings":"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","file":"tumblr.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"tumblr\"] = factory();\n\telse\n\t\troot[\"tumblr\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/tumblr.js\");\n","export default function TemplateAudio (datas) {\n\treturn `\n        <div class=\"card\">\n            ${datas.player}\n            <div class=\"card-body\">\n                <h5 class=\"card-title\">${datas.summary}</h5>\n            </div>\n        </div>\n    `\n}\n","/* prettier-ignore */\nexport default function TemplateChat (datas) {\n\treturn `\n        <div class=\"card\">\n            <h2>${datas.title}</h2>\n            <ul class=\"conversation\">\n                ${datas.dialogue.map(line => {\n\t\treturn `\n                        <li>\n                            <strong>${line.label}</strong>&nbsp;&nbsp;\n                            ${line.phrase}\n                        </li>\n                    `\n\t}).join('')}\n                        </ul>\n        </div>\n    `\n}\n","export default function TemplateLink (datas) {\n\treturn `\n        <div class=\"card\">\n            <a href=\"${datas.url}\" title=\"${datas.title}\">${datas.title}</a>\n            <div class=\"card-body\">\n                <h5 class=\"card-title\">${datas.description}</h5>\n            </div>\n        </div>\n    `\n}\n","export default function TemplatePhoto (datas) {\n\treturn `\n        <div class=\"card\">\n            <img class=\"card-img-top\" src=\"${datas.photos[0].original_size.url}\" alt=\"${datas.summary}\" />\n            <div class=\"card-body\">\n                <h5 class=\"card-title\">${datas.caption}</h5>\n            </div>\n        </div>\n    `\n}\n","export default function TemplateQuote (datas) {\n\treturn `\n        <div class=\"card\">\n            <blockquote class=\"blockquote\">\n                <p>${datas.text}</p>\n                <footer class=\"blockquote-footer\">${datas.source}</footer>\n            </blockquote>\n        </div>\n    `\n}\n","export default function TemplateText (datas) {\n\treturn `\n        <div class=\"card\">\n            <h2>${datas.title}</h2>\n            <p>${datas.body}</p>\n        </div>\n    `\n}\n","export default function TemplateVideo (datas) {\n\treturn `\n        <div class=\"card\">\n            ${datas.player[2].embed_code}\n            <div class=\"card-body\">\n                <h5 class=\"card-title\">${datas.caption}</h5>\n            </div>\n        </div>\n    `\n}\n","import TemplateText from './templates/template-text'\nimport TemplatePhoto from './templates/template-photo'\nimport TemplateQuote from './templates/template-quote'\nimport TemplateVideo from './templates/template-video'\nimport TemplateAudio from './templates/template-audio'\nimport TemplateChat from './templates/template-chat'\nimport TemplateLink from './templates/template-link'\n\nexport default class Tumblr {\n\tconstructor (options) {\n\t\tconst userOptions = options || {}\n\t\tconst defaultOptions = {\n\t\t\thost: '',\n\t\t\tuseAPI: false,\n\t\t\tkeyAPI: '',\n\t\t\tlimitData: 250,\n\t\t\tcache: false,\n\t\t\tcacheMethod: 'sessionStorage',\n\t\t\telement: '',\n\t\t\tnearBottom: 350,\n\t\t\telementPerPage: 20,\n\t\t\ttotalPages: 1\n\t\t}\n\n\t\t// Merge default options with user options\n\t\tthis.options = Object.assign(defaultOptions, userOptions)\n\n\t\t// No configurables params\n\t\tthis.infiniteScroll = true\n\t\tthis.endPage = false\n\t\tthis.isLoading = false\n\t\tthis.jsonComplete = false\n\t\tthis.currentPage = 1\n\t\tthis.nbPostPerRequest = 50\n\n\t\tthis.handlers = {}\n\n\t\tthis.onScroll = this.onScroll.bind(this)\n\t}\n\n\tinit = async () => {\n\t\t// Get JSON and push it in cache if option is active and if it's possible\n\t\tif (this.options.useAPI) {\n\t\t\tconst datas = await this.getAllDatas()\n\n\t\t\tthis.datas = datas\n\t\t\tthis.jsonComplete = true\n\t\t}\n\t\tconsole.log(this.datas)\n\n\t\tthis.addEvents()\n\t\tthis.buildDOM()\n\t}\n\n\taddEvents () {\n\t\twindow.addEventListener('scroll', this.onScroll, false)\n\t}\n\n\tbuildDOM () {\n\t\tlet html = ''\n\n\t\tconst maxIteration =\n\t\t\tthis.datas.totalPosts < this.options.elementPerPage\n\t\t\t\t? this.datas.totalPosts\n\t\t\t\t: this.options.elementPerPage\n\n\t\tfor (let i = 0; i < maxIteration; i++) {\n\t\t\tconst post = this.datas.posts[i]\n\t\t\tconst type = post.type\n\t\t\tconst template = this.getTemplateByType(type)\n\n\t\t\thtml += template(post)\n\t\t}\n\n\t\tthis.options.element.insertAdjacentHTML('beforeend', html)\n\t}\n\n\tgetTemplateByType (type) {\n\t\tif (type === 'text') {\n\t\t\treturn TemplateText.bind(this)\n\t\t} else if (type === 'photo') {\n\t\t\treturn TemplatePhoto.bind(this)\n\t\t} else if (type === 'quote') {\n\t\t\treturn TemplateQuote.bind(this)\n\t\t} else if (type === 'video') {\n\t\t\treturn TemplateVideo.bind(this)\n\t\t} else if (type === 'audio') {\n\t\t\treturn TemplateAudio.bind(this)\n\t\t} else if (type === 'chat') {\n\t\t\treturn TemplateChat.bind(this)\n\t\t} else if (type === 'link') {\n\t\t\treturn TemplateLink.bind(this)\n\t\t}\n\t}\n\n\tonScroll (e) {\n\t\tif (\n\t\t\t!this.isLoading &&\n\t\t\tthis.infiniteScroll &&\n\t\t\t!this.endPage &&\n\t\t\t(this.checkPage() === 'home' || this.checkPage() === 'tagged')\n\t\t) {\n\t\t\tif (\n\t\t\t\tthis.getScrollTop() >=\n\t\t\t\tdocument.body.clientHeight - window.innerHeight - this.options.nearBottom\n\t\t\t) {\n\t\t\t\tthis.isLoading = true\n\n\t\t\t\tif (this.currentPage >= this.options.totalPages) {\n\t\t\t\t\tthis.isLoading = false\n\t\t\t\t\tthis.endPage = true\n\t\t\t\t} else {\n\t\t\t\t\t// Get post of next page (home and tagged page)\n\t\t\t\t\tconst datas = this.getPostOfPage(\n\t\t\t\t\t\tthis.currentPage + 1,\n\t\t\t\t\t\tthis.checkPage() === 'tagged'\n\t\t\t\t\t)\n\t\t\t\t\tthis.onReceivedNewPosts(datas)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonReceivedNewPosts (datas) {\n\t\tthis.currentPage++\n\n\t\tthis.options.element.insertAdjacentHTML('beforeend', datas)\n\n\t\t// Reload new like button after append\n\t\tTumblr.LikeButton.get_status_by_page(this.currentPage)\n\n\t\tthis.isLoading = false\n\t}\n\n\t// Manage events\n\ton (eventName, method) {\n\t\tvar self = this\n\t\tthis.handlers[method] = function () {\n\t\t\tmethod.call(self)\n\t\t}\n\t\tdocument.on(eventName, this.handlers[method])\n\t}\n\n\toff (eventName, method) {\n\t\tdocument.off(eventName, this.handlers[method])\n\t}\n\n\ttrigger (eventName, datas) {\n\t\tdocument.trigger(eventName, typeof datas !== 'undefined' ? datas : [])\n\t}\n\n\t// Get the json and store it in cache if possible\n\tgetAllDatas = async e => {\n\t\tlet datas\n\t\t// If cache is true\n\t\tif (this.options.cache) {\n\t\t\t// Try to get JSON in cache\n\t\t\tvar getDataFromCache = window[this.options.cacheMethod].getItem('TUMBLR_JSON_DATA')\n\n\t\t\t// If doesn't exist, get the JSON with limit (this.options.limitData)\n\t\t\tif (getDataFromCache === null) {\n\t\t\t\tdatas = await this.getDataFromAPI()\n\n\t\t\t\twindow[this.options.cacheMethod].setItem('TUMBLR_JSON_DATA', JSON.stringify(datas))\n\t\t\t} else {\n\t\t\t\t// If exist in web storage, get it\n\t\t\t\tdatas = JSON.parse(window[this.options.cacheMethod].getItem('TUMBLR_JSON_DATA'))\n\t\t\t}\n\t\t} else {\n\t\t\t// If cache is false or browser doesn't support web storage\n\t\t\tdatas = await this.getDataFromAPI()\n\n\t\t\t// Remove data in web storage if already exist\n\t\t\twindow[this.options.cacheMethod].removeItem('TUMBLR_JSON_DATA')\n\t\t}\n\n\t\treturn datas\n\t}\n\n\tgetAPIUrl () {\n\t\treturn `//api.tumblr.com/v2/blog/${this.options.host}/posts/?api_key=${this.options.keyAPI}&limit=${this.nbPostPerRequest}&notes_info=false`\n\t}\n\n\trequestAPI (url) {\n\t\treturn fetch(url).then(response => response.json())\n\t}\n\n\tgetNumberOfRequest (totalPost) {\n\t\treturn totalPost <= this.options.limitData\n\t\t\t? Math.ceil((totalPost - this.nbPostPerRequest) / this.nbPostPerRequest)\n\t\t\t: Math.ceil((this.options.limitData - this.nbPostPerRequest) / this.nbPostPerRequest)\n\t}\n\n\t// Get all the json with a limit\n\tgetDataFromAPI = async () => {\n\t\tconst datasFirstRequest = await this.requestAPI(this.getAPIUrl())\n\t\tconst totalPosts = datasFirstRequest.response.total_posts\n\t\tconst nbLoop = this.getNumberOfRequest(totalPosts)\n\t\tlet posts = datasFirstRequest.response.posts\n\n\t\tif (datasFirstRequest.response.posts.length && nbLoop) {\n\t\t\tconst apiUrls = []\n\n\t\t\t// Else do multiple loop to get data in JSON (limit this.options.limitData)\n\t\t\tfor (var i = 0; i < nbLoop; i++) {\n\t\t\t\tapiUrls.push(\n\t\t\t\t\t`${this.getAPIUrl()}&offset=${this.nbPostPerRequest +\n\t\t\t\t\t\tthis.nbPostPerRequest * i}`\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tconst requests = []\n\t\t\tapiUrls.forEach(url => requests.push(fetch(url).then(response => response.json())))\n\t\t\tawait Promise.all(requests).then(responses => {\n\t\t\t\tresponses.forEach(response => {\n\t\t\t\t\tposts = posts.concat(response.response.posts)\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\n\t\treturn { totalPosts, posts }\n\t}\n\n\t// Getpostofpage, use by infinite scroll\n\tgetPostOfPage (numPage, taggedPage) {\n\t\tvar url = null\n\n\t\tif (numPage > this.options.totalPages) {\n\t\t\treturn false\n\t\t} else {\n\t\t\t// If tagged page, change url of ajax request\n\t\t\tif (taggedPage) {\n\t\t\t\turl = `${this.options.host}/tagged/${this.getTagPage()}/page/${numPage}`\n\t\t\t} else {\n\t\t\t\turl = `${this.options.host}/page/${numPage}`\n\t\t\t}\n\n\t\t\treturn fetch(url)\n\t\t\t\t.then(response => response.json())\n\t\t\t\t.then(response => response)\n\t\t}\n\t}\n\n\t// Get a related posts\n\tgetRelatedPosts (options) {\n\t\tvar listPosts = []\n\t\tvar listID = []\n\t\tvar randomTagsArray = []\n\t\tvar randomArray = []\n\t\tvar currentID = 0\n\t\tvar tags = []\n\t\tvar posts = null\n\n\t\tvar params = Object.assign(\n\t\t\t{\n\t\t\t\tlimit: 3,\n\t\t\t\tignoreTag: null\n\t\t\t},\n\t\t\toptions\n\t\t)\n\n\t\tif (!this.options.useAPI) {\n\t\t\tconsole.log('Related post use API, please active useAPI in params.')\n\t\t\treturn\n\t\t}\n\n\t\t// If current page is different of page post or json not complete, stop\n\t\tif (this.checkPage() !== 'post' || !this.jsonComplete) {\n\t\t\tconsole.log(\n\t\t\t\t'Related post can only be add on post page when _Tumblr.events.JSON_COMPLETE is published'\n\t\t\t)\n\t\t\treturn\n\t\t}\n\n\t\t// Get tags of current post\n\t\ttags = this.getTagsPost()\n\n\t\t// If return null, idPost is unknown in the cache\n\t\tif (tags === null) {\n\t\t\tconsole.log('The current post (' + this.getIdPostPage() + ') has no tag')\n\t\t\treturn\n\t\t}\n\n\t\t// If tag must be ignore\n\t\tif (params.ignoreTag != null && tags.length > 1) {\n\t\t\tfor (let l = 0, lengthTagIgnore = tags.length; l < lengthTagIgnore; l++) {\n\t\t\t\tif (params.ignoreTag === tags[l]) {\n\t\t\t\t\ttags.splice(l, 1)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Get current ID post page\n\t\tcurrentID = this.getIdPostPage()\n\n\t\t// Loop in all posts\n\t\tfor (var i = 0, lengthPosts = this.data.posts.length; i < lengthPosts; i++) {\n\t\t\tposts = this.data.posts[i]\n\n\t\t\t// If post has tags\n\t\t\tif (typeof posts.tags !== 'undefined') {\n\t\t\t\t// Loop in tags of every post\n\t\t\t\tfor (var j = 0, lengthTag = posts.tags.length; j < lengthTag; j++) {\n\t\t\t\t\t// Loop in tags of current post\n\t\t\t\t\tfor (var k = 0, lengthCurrentTag = tags.length; k < lengthCurrentTag; k++) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tposts.tags[j].toLowerCase() === tags[k].toLowerCase() &&\n\t\t\t\t\t\t\tposts.id !== currentID &&\n\t\t\t\t\t\t\t!listID.includes(posts.id)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tlistPosts.push(posts)\n\t\t\t\t\t\t\tlistID.push(posts.id)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Zero tag return\n\t\tif (listPosts.length) {\n\t\t\t// Get an array of random unique number\n\t\t\trandomArray = this.getRandoms(params.limit, 0, parseInt(listPosts.length) - 1)\n\n\t\t\t// Return all tag\n\t\t\tif (listPosts.length < params.limit) {\n\t\t\t\trandomTagsArray.posts = listPosts\n\t\t\t} else {\n\t\t\t\t// Return random\n\t\t\t\trandomTagsArray.posts = []\n\t\t\t\tfor (let l = 0, lengthRandom = randomArray.length; l < lengthRandom; l++) {\n\t\t\t\t\trandomTagsArray.posts.push(listPosts[randomArray[l]])\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn randomTagsArray\n\t\t}\n\t}\n\n\t// Get a sort tab of all tags\n\tgetAllTags (e) {\n\t\tif (!this.options.useAPI) {\n\t\t\tconsole.log('List of all tags use API, please active useAPI in params.')\n\t\t\treturn\n\t\t}\n\n\t\t// If JSON isn't complete, stop\n\t\tif (!this.jsonComplete) {\n\t\t\tconsole.log(\n\t\t\t\t'The function getAllTags() use JSON data, please attach to _Tumblr.events.JSON_COMPLETE event to execute your code'\n\t\t\t)\n\t\t\treturn\n\t\t}\n\n\t\tvar data = this.data\n\t\tvar listTag = []\n\n\t\tfor (var k = 0, lengthPost = data.posts.length; k < lengthPost; k++) {\n\t\t\tif (typeof data.posts[k].tags !== 'undefined') {\n\t\t\t\tfor (var j = 0, lengthtag = data.posts[k].tags.length; j < lengthtag; j++) {\n\t\t\t\t\tif (!listTag.includes(data.posts[k].tags[j].toLowerCase())) {\n\t\t\t\t\t\tlistTag.push(data.posts[k].tags[j].toLowerCase())\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// return a sort array\n\t\tlistTag.sort()\n\t\treturn listTag\n\t}\n\n\t// Get a list of tags\n\tgetTagsPost (idPost) {\n\t\tif (!this.options.useAPI) {\n\t\t\tconsole.log('List of tags of posts use API, please active useAPI in params.')\n\t\t\treturn\n\t\t}\n\n\t\tvar listTags = []\n\n\t\tif (typeof idPost === 'undefined') idPost = this.getIdPostPage()\n\n\t\tfor (var i = 0, lengthPost = this.data.posts.length; i < lengthPost; i++) {\n\t\t\tif (this.data.posts[i].id === idPost) {\n\t\t\t\tif (typeof this.data.posts[i].tags === 'undefined') return\n\n\t\t\t\tfor (var j = 0, l = this.data.posts[i].tags.length; j < l; j++) {\n\t\t\t\t\tlistTags.push(this.data.posts[i].tags[j].toLowerCase())\n\t\t\t\t}\n\n\t\t\t\treturn listTags\n\t\t\t} else {\n\t\t\t\tif (i === lengthPost - 1) {\n\t\t\t\t\tconsole.log('Unknown idPost')\n\t\t\t\t\treturn null\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Get tag of tagged page\n\tgetTagPage (e) {\n\t\tif (this.checkPage() === 'tagged') {\n\t\t\tvar urlToCheck = ''\n\n\t\t\tif (window.location.hash === '') {\n\t\t\t\turlToCheck = window.location.pathname\n\t\t\t} else {\n\t\t\t\turlToCheck = window.location.hash\n\t\t\t}\n\n\t\t\tvar pathName = urlToCheck.split('/')\n\t\t\tvar tagComponent = pathName[pathName.length - 1]\n\t\t\treturn decodeURIComponent(tagComponent.replace(/-/g, ' '))\n\t\t}\n\t}\n\n\t// Get id of post in post page\n\tgetIdPostPage (e) {\n\t\tvar currentPostUrl = window.location.href\n\t\tvar currentIdPost = null\n\n\t\tif (this.checkPage() === 'post') {\n\t\t\tcurrentPostUrl.replace(/\\/post\\/([0-9]+)/g, (match, $1) => {\n\t\t\t\tcurrentIdPost = $1\n\t\t\t})\n\t\t\treturn currentIdPost\n\t\t}\n\t}\n\n\t// Check page\n\tcheckPage (e) {\n\t\tvar urlToCheck = ''\n\n\t\tif (window.location.hash === '') {\n\t\t\turlToCheck = window.location.pathname\n\t\t} else {\n\t\t\turlToCheck = window.location.hash\n\t\t}\n\n\t\tif (urlToCheck.indexOf('tagged/') !== -1) {\n\t\t\treturn 'tagged'\n\t\t} else if (urlToCheck.indexOf('post/') !== -1) {\n\t\t\treturn 'post'\n\t\t} else if (urlToCheck === '/') {\n\t\t\treturn 'home'\n\t\t}\n\t}\n\n\tstatic getScrollTop () {\n\t\treturn (\n\t\t\twindow.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0\n\t\t)\n\t}\n\n\t// Get a unique random number between min/max\n\tstatic getRandoms (numPicks, min, max) {\n\t\tvar len = max - min + 1\n\t\tvar nums = new Array(len)\n\t\tvar selections = []\n\t\tvar i = 0\n\t\tvar j = 0\n\n\t\tif (min === 0) {\n\t\t\tif (numPicks > max + 1) return\n\t\t} else {\n\t\t\tif (numPicks > max - min + 1) return\n\t\t}\n\n\t\t// Initialize the array\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tnums[i] = i + min\n\t\t}\n\n\t\t// Randomly pick one from the array\n\t\tfor (j = 0; j < numPicks; j++) {\n\t\t\tvar index = Math.floor(Math.random() * nums.length)\n\t\t\tselections.push(nums[index])\n\t\t\tnums.splice(index, 1)\n\t\t}\n\n\t\treturn selections\n\t}\n}\n"],"sourceRoot":""}